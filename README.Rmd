---
title: "README"
output: md_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Soil Knowledge Base

[![R build status](https://github.com/brownag/SoilKnowledgeBase/workflows/R-CMD-check/badge.svg)](https://github.com/brownag/SoilKnowledgeBase/actions)

A soil "knowledge base" centered around the National Cooperative Soil Survey (NCSS) standards as used by the USDA-NRCS and defined in the National Soil Survey Handbook (NSSH). This repository is also an R package that facilitates the regular updates of products from various data sources.

### Get started
```{r, echo=TRUE, eval=FALSE}
# install.packages("remotes")
remotes::install_github("brownag/SoilKnowledgeBase")

SoilKnowledgeBase::parse_nssh_structure()
```

### The Structure of the National Soil Survey Handbook (NSSH)

```{r, results='asis'}
remotes::install_github("brownag/SoilKnowledgeBase", dependencies = FALSE)

dat <- SoilKnowledgeBase::parse_nssh_structure()

.doAbbreviate <- function(x) {
  xx <- gsub("National Cooperative Soil Survey", "NCSS", x)
  gsub("Quality Control, Quality Assurance,", "QC/QA*", xx)
}

dat$parent <- gsub("Part \\d+ . (.*)", "\\1", .doAbbreviate(dat$parent))
dat$section <- gsub("Parts \\d+ to \\d+ . (.*)", "\\1", dat$section)

dat$href <- sprintf("[LINK](%s)", dat$href)

knitr::kable(dat[,c('part_number','parent','section','href')])

```

 - \* QC/QA = Quality Control, Quality Assurance